{"ast":null,"code":"import { fillParamsIntoPath, getParamKeys } from './utils';\nexport function buildPanelPathFromModalMatch(match, router) {\n  const route = match.route;\n\n  function rateByParams(route) {\n    return Object.keys(match.params).map(key => Number(Boolean(route.path?.includes(`:${key}`)))).reduce((acc, item) => acc + item, 0);\n  }\n\n  const panelRoute = router.routes.filter(item => {\n    const itemTyped = item;\n    const parameters = getParamKeys(itemTyped.path).map(param => param.replace(':', ''));\n    return !itemTyped.modal && itemTyped.tab === route.tab && itemTyped.panel === route.panel && itemTyped.view === route.view && itemTyped.root === route.root && parameters.every(param => Object.keys(match.params).includes(param));\n  }).sort((a, b) => rateByParams(a) - rateByParams(b)).pop();\n  return panelRoute && fillParamsIntoPath(panelRoute.path, match.params);\n}","map":{"version":3,"mappings":"AAEA,SAASA,kBAAT,EAA6BC,YAA7B,QAAiD,SAAjD;AAEA,OAAM,SAAUC,4BAAV,CAAuCC,KAAvC,EAAsEC,MAAtE,EAAoF;EACxF,MAAMC,KAAK,GAAGF,KAAK,CAACE,KAApB;;EACA,SAASC,YAAT,CAAsBD,KAAtB,EAA8C;IAC5C,OAAOE,MAAM,CAACC,IAAP,CAAYL,KAAK,CAACM,MAAlB,EACJC,GADI,CACCC,GAAD,IAASC,MAAM,CAACC,OAAO,CAACR,KAAK,CAACS,IAAN,EAAYC,QAAZ,CAAqB,IAAIJ,GAAG,EAA5B,CAAD,CAAR,CADf,EAEJK,MAFI,CAEG,CAACC,GAAD,EAAMC,IAAN,KAAeD,GAAG,GAAGC,IAFxB,EAE8B,CAF9B,CAAP;EAGD;;EACD,MAAMC,UAAU,GAAGf,MAAM,CAACgB,MAAP,CAAcC,MAAd,CAAsBH,IAAD,IAAS;IAC/C,MAAMI,SAAS,GAAGJ,IAAlB;IACA,MAAMK,UAAU,GAAGtB,YAAY,CAACqB,SAAS,CAACR,IAAX,CAAZ,CAA6BJ,GAA7B,CAAkCc,KAAD,IAAWA,KAAK,CAACC,OAAN,CAAc,GAAd,EAAmB,EAAnB,CAA5C,CAAnB;IACA,OAAO,CAACH,SAAS,CAACI,KAAX,IACLJ,SAAS,CAACK,GAAV,KAAkBtB,KAAK,CAACsB,GADnB,IAELL,SAAS,CAACM,KAAV,KAAoBvB,KAAK,CAACuB,KAFrB,IAGLN,SAAS,CAACO,IAAV,KAAmBxB,KAAK,CAACwB,IAHpB,IAILP,SAAS,CAACQ,IAAV,KAAmBzB,KAAK,CAACyB,IAJpB,IAKLP,UAAU,CAACQ,KAAX,CAAkBP,KAAD,IAAWjB,MAAM,CAACC,IAAP,CAAYL,KAAK,CAACM,MAAlB,EAA0BM,QAA1B,CAAmCS,KAAnC,CAA5B,CALF;EAMD,CATkB,EAShBQ,IATgB,CASX,CAACC,CAAD,EAAIC,CAAJ,KAAU5B,YAAY,CAAC2B,CAAD,CAAZ,GAAkB3B,YAAY,CAAC4B,CAAD,CAT7B,EAUhBC,GAVgB,EAAnB;EAWA,OAAOhB,UAAU,IAAInB,kBAAkB,CAACmB,UAAU,CAACL,IAAZ,EAAmBX,KAAK,CAACM,MAAzB,CAAvC;AACD","names":["fillParamsIntoPath","getParamKeys","buildPanelPathFromModalMatch","match","router","route","rateByParams","Object","keys","params","map","key","Number","Boolean","path","includes","reduce","acc","item","panelRoute","routes","filter","itemTyped","parameters","param","replace","modal","tab","panel","view","root","every","sort","a","b","pop"],"sources":["C:\\Users\\nasti\\Desktop\\VK\\ForestEm\\Forest\\node_modules\\@vkontakte\\vk-mini-apps-router\\src\\utils\\buildPanelPathFromModalMatch.ts"],"sourcesContent":["import { AgnosticDataRouteMatch, Router } from '@remix-run/router';\nimport { InternalRouteConfig, ModalWithRoot } from '../type';\nimport { fillParamsIntoPath, getParamKeys } from './utils';\n\nexport function buildPanelPathFromModalMatch(match: AgnosticDataRouteMatch, router: Router): string | undefined {\n  const route = match.route as ModalWithRoot & InternalRouteConfig;\n  function rateByParams(route: { path?: string }): number {\n    return Object.keys(match.params)\n      .map((key) => Number(Boolean(route.path?.includes(`:${key}`))))\n      .reduce((acc, item) => acc + item, 0);\n  }\n  const panelRoute = router.routes.filter((item) => {\n    const itemTyped = item as ModalWithRoot & InternalRouteConfig;\n    const parameters = getParamKeys(itemTyped.path).map((param) => param.replace(':', ''));\n    return !itemTyped.modal &&\n      itemTyped.tab === route.tab &&\n      itemTyped.panel === route.panel &&\n      itemTyped.view === route.view &&\n      itemTyped.root === route.root &&\n      parameters.every((param) => Object.keys(match.params).includes(param));\n  }).sort((a, b) => rateByParams(a) - rateByParams(b))\n    .pop();\n  return panelRoute && fillParamsIntoPath(panelRoute.path!, match.params);\n}\n"]},"metadata":{},"sourceType":"module"}