{"ast":null,"code":"import { uniqueKey } from './common';\n\nclass BaseTabPage {\n  constructor(id, path, modals) {\n    this.id = id;\n    this.path = path;\n    this.modals = modals;\n    modals.forEach(modal => {\n      // @ts-expect-error\n      this[uniqueKey(this, modal.id)] = modal;\n    });\n  }\n\n  getRoutes() {\n    return this.modals.map(modal => modal.getRoutes()).flat().map(route => ({ ...route,\n      tab: this.id\n    })).concat({\n      path: this.path,\n      tab: this.id\n    });\n  }\n\n}\n\nexport class TabPage extends BaseTabPage {\n  constructor(id, path) {\n    let modals = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    super(id, path, modals);\n    this.path = path;\n    this.hasParams = false;\n  }\n\n}\nexport class TabPageWithParams extends BaseTabPage {\n  constructor(id, path, paramKeys) {\n    let modals = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n    super(id, path, modals);\n    this.id = id;\n    this.path = path;\n    this.paramKeys = paramKeys;\n    this.hasParams = true;\n  }\n\n}\nexport function createTab(id, path, modals, paramKeys) {\n  if (paramKeys) {\n    return new TabPageWithParams(id, path, paramKeys, modals ?? []);\n  }\n\n  return new TabPage(id, path, modals ?? []);\n}","map":{"version":3,"mappings":"AAAA,SAAkEA,SAAlE,QAAmF,UAAnF;;AASA,MAAeC,WAAf,CAA0B;EACxBC,YAA6BC,EAA7B,EAA2CC,IAA3C,EAAmEC,MAAnE,EAAyF;IAA5D;IAAc;IAAwB;IACjEA,MAAM,CAACC,OAAP,CAAgBC,KAAD,IAAU;MACvB;MACA,KAAKP,SAAS,CAAC,IAAD,EAAOO,KAAK,CAACJ,EAAb,CAAd,IAAkCI,KAAlC;IACD,CAHD;EAID;;EAEDC,SAAS;IACP,OAAO,KAAKH,MAAL,CACJI,GADI,CACCF,KAAD,IAAWA,KAAK,CAACC,SAAN,EADX,EAEJE,IAFI,GAGJD,GAHI,CAGCE,KAAD,KAA6B,EAAE,GAAGA,KAAL;MAAYC,GAAG,EAAE,KAAKT;IAAtB,CAA7B,CAHA,EAIJU,MAJI,CAIG;MACNT,IAAI,EAAE,KAAKA,IADL;MAENQ,GAAG,EAAE,KAAKT;IAFJ,CAJH,CAAP;EAQD;;AAjBuB;;AAoB1B,OAAM,MAAOW,OAAP,SAAyCb,WAAzC,CAAuD;EAE3DC,YAAYC,EAAZ,EAA0BC,IAA1B,EAAmE;IAAA,IAA3BC,MAA2B,uEAAF,EAAE;IACjE,MAAMF,EAAN,EAAUC,IAAV,EAAgBC,MAAhB;IADwB;IAD1B,iBAAmB,KAAnB;EAGC;;AAJ0D;AAO7D,OAAM,MAAOU,iBAAP,SAAqEd,WAArE,CAAmF;EAEvFC,YAAmBC,EAAnB,EAAiCC,IAAjC,EAAsDY,SAAtD,EAA0G;IAAA,IAA3BX,MAA2B,uEAAF,EAAE;IACxG,MAAMF,EAAN,EAAUC,IAAV,EAAgBC,MAAhB;IADiB;IAAc;IAAqB;IADtD,iBAAkB,IAAlB;EAGC;;AAJsF;AA+DzF,OAAM,SAAUY,SAAV,CAAwDd,EAAxD,EAA+DC,IAA/D,EAA6EC,MAA7E,EAAsGW,SAAtG,EAA8H;EAElI,IAAIA,SAAJ,EAAe;IACb,OAAO,IAAID,iBAAJ,CAAsBZ,EAAtB,EAA0BC,IAA1B,EAAgCY,SAAhC,EAA2CX,MAAM,IAAI,EAArD,CAAP;EACD;;EACD,OAAO,IAAIS,OAAJ,CAAYX,EAAZ,EAAgBC,IAAhB,EAAsBC,MAAM,IAAI,EAAhC,CAAP;AACD","names":["uniqueKey","BaseTabPage","constructor","id","path","modals","forEach","modal","getRoutes","map","flat","route","tab","concat","TabPage","TabPageWithParams","paramKeys","createTab"],"sources":["C:\\Users\\nasti\\Desktop\\VK\\ForestEm\\Forest\\node_modules\\@vkontakte\\vk-mini-apps-router\\src\\page-types\\TabPage.ts"],"sourcesContent":["import { AddChild, HasId, Page, PageWithParams, RepresentsRoutes, uniqueKey } from './common';\nimport { AnyModalPage } from './ModalPage';\nimport { CommonRouteObject } from '../type';\n\ninterface TabRoutePartial extends CommonRouteObject {\n  tab: string;\n  modal?: string;\n}\n\nabstract class BaseTabPage<I extends string> implements RepresentsRoutes<TabRoutePartial>, HasId<I> {\n  protected constructor(public id: I, public path: string, protected modals: AnyModalPage[]) {\n    modals.forEach((modal) => {\n      // @ts-expect-error\n      this[uniqueKey(this, modal.id)] = modal;\n    });\n  }\n\n  getRoutes(): TabRoutePartial[] {\n    return this.modals\n      .map((modal) => modal.getRoutes())\n      .flat()\n      .map((route): TabRoutePartial => ({ ...route, tab: this.id }))\n      .concat({\n        path: this.path,\n        tab: this.id,\n      });\n  }\n}\n\nexport class TabPage<I extends string> extends BaseTabPage<I> implements Page, HasId<I> {\n  hasParams: false = false;\n  constructor(id: I, public path: string, modals: AnyModalPage[] = []) {\n    super(id, path, modals);\n  }\n}\n\nexport class TabPageWithParams<I extends string, T extends string> extends BaseTabPage<I> implements PageWithParams<T>, HasId<I> {\n  hasParams: true = true;\n  constructor(public id: I, public path: string, public paramKeys: readonly T[], modals: AnyModalPage[] = []) {\n    super(id, path, modals);\n  }\n}\n\nexport type AnyTabPage = TabPage<any> | TabPageWithParams<any, any>;\n\nexport function createTab<\n  T extends string,\n  A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage, D extends AnyModalPage,\n  E extends AnyModalPage, F extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C, D, E, F]):\nAddChild<AddChild<AddChild<AddChild<AddChild<AddChild<TabPage<T>, A>, B>, C>, D>, E>, F>;\nexport function createTab<\n  T extends string,\n  A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage, D extends AnyModalPage,\n  E extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C, D, E]):\nAddChild<AddChild<AddChild<AddChild<AddChild<TabPage<T>, A>, B>, C>, D>, E>;\nexport function createTab<\n  T extends string,\n  A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage, D extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C, D]):\nAddChild<AddChild<AddChild<AddChild<TabPage<T>, A>, B>, C>, D>;\nexport function createTab<\n  T extends string, A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C]): AddChild<AddChild<AddChild<TabPage<T>, A>, B>, C>;\nexport function createTab<\n  T extends string, A extends AnyModalPage, B extends AnyModalPage,\n>(id: T, path: string, modals: [A, B]): AddChild<AddChild<TabPage<T>, A>, B>;\nexport function createTab<T extends string, A extends AnyModalPage>(id: T, path: string, modals: [A]): AddChild<TabPage<T>, A>;\nexport function createTab<T extends string>(id: T, path: string, modals?: AnyModalPage[]): TabPage<T>;\n\nexport function createTab<\n  T extends string, P extends string,\n  A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage, D extends AnyModalPage,\n  E extends AnyModalPage, F extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C, D, E, F], paramKeys: readonly P[]):\nAddChild<AddChild<AddChild<AddChild<AddChild<AddChild<TabPageWithParams<T, P>, A>, B>, C>, D>, E>, F>;\nexport function createTab<\n  T extends string, P extends string,\n  A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage, D extends AnyModalPage,\n  E extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C, D, E], paramKeys: readonly P[]):\nAddChild<AddChild<AddChild<AddChild<AddChild<TabPageWithParams<T, P>, A>, B>, C>, D>, E>;\nexport function createTab<\n  T extends string, P extends string,\n  A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage, D extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C, D], paramKeys: readonly P[]):\nAddChild<AddChild<AddChild<AddChild<TabPageWithParams<T, P>, A>, B>, C>, D>;\nexport function createTab<\n  T extends string, P extends string,\n  A extends AnyModalPage, B extends AnyModalPage, C extends AnyModalPage,\n>(id: T, path: string, modals: [A, B, C], paramKeys: readonly P[]): AddChild<AddChild<AddChild<TabPageWithParams<T, P>, A>, B>, C>;\nexport function createTab<\n  T extends string, P extends string, A extends AnyModalPage, B extends AnyModalPage,\n>(id: T, path: string, modals: [A, B], paramKeys: readonly P[]): AddChild<AddChild<TabPageWithParams<T, P>, A>, B>;\nexport function createTab<\n  T extends string, P extends string, A extends AnyModalPage,\n>(id: T, path: string, modals: [A], paramKeys: readonly P[]): AddChild<TabPageWithParams<T, P>, A>;\nexport function createTab<T extends string, P extends string>(id: T, path: string, modals: AnyModalPage[], paramKeys: readonly P[]): TabPageWithParams<T, P>;\nexport function createTab<T extends string, P extends string>(id: T, path: string, modals?: AnyModalPage[], paramKeys?: readonly P[]):\nTabPage<T> | TabPageWithParams<T, P> {\n  if (paramKeys) {\n    return new TabPageWithParams(id, path, paramKeys, modals ?? []);\n  }\n  return new TabPage(id, path, modals ?? []);\n}\n"]},"metadata":{},"sourceType":"module"}